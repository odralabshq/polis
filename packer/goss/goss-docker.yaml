# goss-docker.yaml - Docker installation validation

package:
  docker-ce:
    installed: true
  docker-ce-cli:
    installed: true
  containerd.io:
    installed: true

service:
  docker:
    enabled: true
    running: true

file:
  /etc/docker/daemon.json:
    exists: true
    mode: "0644"
    contents:
      - '"no-new-privileges": true'
      - '"live-restore": true'
      - '"userland-proxy": false'
      - sysbox-runc

  /etc/apt/keyrings/docker.asc:
    exists: true

command:
  docker-version:
    exec: "docker --version"
    exit-status: 0
    stdout:
      - "Docker version"

  docker-info:
    exec: "sudo docker info 2>/dev/null | grep -i runtime"
    exit-status: 0
    stdout:
      - sysbox-runc
